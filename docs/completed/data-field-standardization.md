---
# λ°μ΄ν„° ν•„λ“ ν‘μ¤€ν™” (Data Field Standardization)

## Status
- [x] μ™„λ£ (2025-08-27)

## Description
ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ ID ν•„λ“ λ¶μΌμΉ λ¬Έμ λ¥Ό ν•΄κ²°ν•΄μ•Ό ν•©λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” `_id` (λ¬Έμμ—΄)μ„ μ‚¬μ©ν•κ³  μ„λ²„λ” `id` (μ«μ)λ¥Ό μ‚¬μ©ν•μ—¬ μμ •/μ‚­μ  κΈ°λ¥μ΄ μ •μƒμ μΌλ΅ μ‘λ™ν•μ§€ μ•μµλ‹λ‹¤.

## Implementation Details
### ν„μ¬ μƒνƒ
#### ν΄λΌμ΄μ–ΈνΈ λ°μ΄ν„° λ¨λΈ
- **μ„μΉ**: `salon-reservation-client/src/components/AppointmentForm.tsx`
- **λΌμΈ**: 3-10
```typescript
export interface AppointmentData {
  _id?: string;    // MongoDB μ¤νƒ€μΌ
  customerName: string;
  date: string;
  time: string;
  stylist: string;
  serviceType: string;
}
```

#### μ„λ²„ λ°μ΄ν„° λ¨λΈ
- **μ„μΉ**: `salon-reservation-server/routes/reservations.js`
- **λΌμΈ**: 34-42
```javascript
{
  id: nextId++,           // μ«μν• ID
  customerName,
  date,
  time,
  stylist,
  serviceType,
  createdAt: new Date()
}
```

### λ¬Έμ  λ°μƒ μ§€μ 
1. **μ‚­μ  κΈ°λ¥**: `reservation._id`κ°€ undefinedμ΄λ―€λ΅ API νΈμ¶ μ‹¤ν¨
2. **μμ • κΈ°λ¥**: ID λ¶μΌμΉλ΅ λ°μ΄ν„° λ§¤μΉ­ λ¶κ°€
3. **ν…μ΄λΈ” ν‘μ‹**: key propμ—μ„ μΌκ΄€μ„± λ¶€μ΅±

## Requirements
### ν•΄κ²° λ°©μ• (νƒ 1)
#### λ°©μ• 1: μ„λ²„λ¥Ό ν΄λΌμ΄μ–ΈνΈμ— λ§μ¶”κΈ° (κ¶μ¥)
- μ„λ²„ ID ν•„λ“λ¥Ό `_id: string`μΌλ΅ λ³€κ²½
- UUID λλ” λ¬Έμμ—΄ ID μƒμ„± λ΅μ§ κµ¬ν„
- ν–¥ν›„ MongoDB μ—°λ™ μ‹ νΈν™μ„± ν™•λ³΄

#### λ°©μ• 2: ν΄λΌμ΄μ–ΈνΈλ¥Ό μ„λ²„μ— λ§μ¶”κΈ°  
- ν΄λΌμ΄μ–ΈνΈ μΈν„°νμ΄μ¤λ¥Ό `id: number`λ΅ λ³€κ²½
- λ¨λ“  μ»΄ν¬λ„νΈμ—μ„ `_id` β†’ `id` λ³€κ²½

#### λ°©μ• 3: μ–΄λ‘ν„° ν¨ν„΄ κµ¬ν„
- API μ‘λ‹µ μ‹ ν΄λΌμ΄μ–ΈνΈ ν•μ‹μΌλ΅ λ³€ν™
- μ”μ²­ μ‹ μ„λ²„ ν•μ‹μΌλ΅ λ³€ν™

### λΉ„μ¦λ‹μ¤ μ”κµ¬μ‚¬ν•­
1. μμ • κΈ°λ¥μ΄ μ •μƒ μ‘λ™ν•΄μ•Ό ν•¨
2. μ‚­μ  κΈ°λ¥μ΄ μ •μƒ μ‘λ™ν•΄μ•Ό ν•¨  
3. λ°μ΄ν„° μΌκ΄€μ„± μ μ§€
4. ν–¥ν›„ λ°μ΄ν„°λ² μ΄μ¤ μ—°λ™ κ³ λ ¤

## Dependencies
### μν–¥λ°›λ” νμΌλ“¤
#### ν΄λΌμ΄μ–ΈνΈ (λ°©μ• 2 μ±„νƒ μ‹)
- `src/components/AppointmentForm.tsx` (μΈν„°νμ΄μ¤ μ •μ)
- `src/components/ReservationTable.tsx` (ν…μ΄λΈ” λ λ”λ§)
- `src/App.tsx` (μƒνƒ κ΄€λ¦¬, API νΈμ¶)

#### μ„λ²„ (λ°©μ• 1 μ±„νƒ μ‹)
- `routes/reservations.js` (μ „μ²΄ CRUD λ΅μ§)
- `test/` ν΄λ”μ λ¨λ“  ν…μ¤νΈ νμΌ

#### κ³µν†µ
- API ν†µμ‹  ν•μ‹
- ν…μ¤νΈ λ°μ΄ν„° κµ¬μ΅°

### μ—°κ΄€ κΈ°λ¥
- μμ•½ μμ • κΈ°λ¥ (ν„μ¬ λ™μ‘ μ•ν•¨)
- μμ•½ μ‚­μ  κΈ°λ¥ (ν„μ¬ λ™μ‘ μ•ν•¨)
- ν…μ΄λΈ” λ λ”λ§ μµμ ν™” (React key prop)

## TODO
### μ°μ„ μμ„: π”¥ κΈ΄κΈ‰ (Critical)

#### Phase 1: ν‘μ¤€ν™” λ°©ν–¥ κ²°μ •
- [ ] MongoDB/NoSQL λ°©ν–¥μ„± κ³ λ ¤ν•μ—¬ `_id: string` μ±„νƒ (κ¶μ¥)
- [ ] λλ” SQL λ°μ΄ν„°λ² μ΄μ¤ κ³ λ ¤ν•μ—¬ `id: number` μ±„νƒ

#### Phase 2A: μ„λ²„ ν‘μ¤€ν™” (λ°©μ• 1)
- [ ] `uuid` ν¨ν‚¤μ§€ μ„¤μΉ: `npm install uuid @types/uuid`
- [ ] ID μƒμ„± λ΅μ§μ„ `_id: uuid()` λ°©μ‹μΌλ΅ λ³€κ²½
- [ ] λ¨λ“  CRUD μ—°μ‚°μ—μ„ `_id` ν•„λ“ μ‚¬μ©
- [ ] ν…μ¤νΈ λ°μ΄ν„° λ° λ© λ°μ΄ν„° μ—…λ°μ΄νΈ

#### Phase 2B: ν΄λΌμ΄μ–ΈνΈ ν‘μ¤€ν™” (λ°©μ• 2)
- [ ] `AppointmentData` μΈν„°νμ΄μ¤μ—μ„ `_id` β†’ `id` λ³€κ²½
- [ ] λ¨λ“  μ»΄ν¬λ„νΈμ—μ„ `_id` μ°Έμ΅°λ¥Ό `id`λ΅ μμ •
- [ ] TypeScript νƒ€μ…μ„ `string`μ—μ„ `number`λ΅ λ³€κ²½

#### Phase 3: νΈν™μ„± ν™•λ³΄
- [ ] κΈ°μ΅΄ λ°μ΄ν„°μ™€μ νΈν™μ„± κ²€μ¦
- [ ] λ§μ΄κ·Έλ μ΄μ… λ΅μ§ κµ¬ν„ (ν•„μ”μ‹)

#### Phase 4: κ²€μ¦ λ° ν…μ¤νΈ
- [ ] μμ • κΈ°λ¥ μ •μƒ μ‘λ™ ν™•μΈ
- [ ] μ‚­μ  κΈ°λ¥ μ •μƒ μ‘λ™ ν™•μΈ
- [ ] λ¨λ“  API ν…μ¤νΈ ν†µκ³Ό ν™•μΈ
- [ ] λΈλΌμ°μ €μ—μ„ E2E ν…μ¤νΈ

#### Phase 5: λ¬Έμ„ μ—…λ°μ΄νΈ
- [ ] λ°μ΄ν„° λ¨λΈ λ¬Έμ„ μ—…λ°μ΄νΈ
- [ ] API λ¬Έμ„ μ¤ν‚¤λ§ μμ •
- [ ] κ°λ° κ°€μ΄λ“λΌμΈ μ—…λ°μ΄νΈ

### μμƒ μ‘μ—… μ‹κ°„
- **μ„¤κ³„ λ° κ²°μ •**: 1μ‹κ°„
- **κµ¬ν„**: 2-3μ‹κ°„  
- **ν…μ¤νΈ**: 2μ‹κ°„
- **λ¬Έμ„ν™”**: 1μ‹κ°„
- **μ΄ν•©**: 6-7μ‹κ°„

### μ„ν— μ”μ†
- λ€λ‰ μ½”λ“ μμ •μΌλ΅ μΈν• λ²„κ·Έ λ°μƒ κ°€λ¥μ„±
- ν…μ¤νΈ λ°μ΄ν„° λ¶μΌμΉ
- νƒ€μ… μ—λ¬ λ°μƒ κ°€λ¥μ„±
- κΈ°μ΅΄ μ €μ¥λ λ°μ΄ν„°μ™€μ μ¶©λ

## Playwright Testing
- [ ] UI λ λ”λ§ κ²€μ‚¬
- [ ] κΈ°λ¥ λ™μ‘ ν…μ¤νΈ  
- [ ] λ°μ‘ν• λ μ΄μ•„μ›ƒ κ²€μ¦
- [ ] μ ‘κ·Όμ„± κ²€μ‚¬
- [ ] μ½μ†” μ—λ¬ ν™•μΈ

## Issues Found & Resolved

### 1. ID ν•„λ“ λ¶μΌμΉ λ¬Έμ 
**λ¬Έμ **: ν΄λΌμ΄μ–ΈνΈλ” `_id: string` μ‚¬μ©, μ„λ²„λ” `id: number` μ‚¬μ©
- **μν–¥**: μμ•½ μμ •/μ‚­μ  κΈ°λ¥μ΄ μ™„μ „ν μ‘λ™ν•μ§€ μ•μ
- **ν•΄κ²°λ°©λ²•**: μ„λ²„λ¥Ό ν΄λΌμ΄μ–ΈνΈ ν‘μ¤€μ— λ§μ¶° `_id: string` UUIDλ΅ λ³€κ²½
- **μμ • νμΌ**: `routes/reservations.js` μ „μ²΄ CRUD λ΅μ§
- **κ²°κ³Ό**: λ¨λ“  CRUD μ‘μ—…μ΄ μΌκ΄€λ λ°μ΄ν„° κµ¬μ΅°λ΅ λ™μ‘

### 2. UUID ν¨ν‚¤μ§€ μ„¤μΉ ν•„μ”
**λ¬Έμ **: μ„λ²„μ—μ„ λ¬Έμμ—΄ ID μƒμ„± λ°©λ²• λ¶€μ¬
- **ν•΄κ²°λ°©λ²•**: `uuid` ν¨ν‚¤μ§€ μ„¤μΉ λ° `uuidv4()` μ‚¬μ©
- **λ…λ Ήμ–΄**: `npm install uuid`
- **κ²°κ³Ό**: MongoDB νΈν™ κ°€λ¥ν• λ¬Έμμ—΄ ID μƒμ„±

### 3. ν…μ¤νΈ νμΌ λ°μ΄ν„° νƒ€μ… λ¶μΌμΉ
**λ¬Έμ **: λ¨λ“  ν…μ¤νΈκ°€ `id: number` κΈ°μ¤€μΌλ΅ μ‘μ„±λ¨
- **ν•΄κ²°λ°©λ²•**: 4κ° ν…μ¤νΈ νμΌμ—μ„ `id` β†’ `_id` λ³€κ²½
- **μμ • νμΌλ“¤**:
  - `testReservationGet.js` (λΌμΈ 48, 64)
  - `testReservationPut.js` (λΌμΈ 48, 57, 70, 87)
  - `testReservationDelete.js` (λΌμΈ 64, 65, 71, 84)
- **κ²°κ³Ό**: λ¨λ“  ν…μ¤νΈκ°€ μƒλ΅μ΄ UUID κµ¬μ΅°μ™€ νΈν™

### 4. μ„λ²„ CRUD λ΅μ§ μ™„μ „ ν‘μ¤€ν™”
**μμ • λ‚΄μ©**:
- β… POST: `id: nextId++` β†’ `_id: uuidv4()`
- β… GET by ID: `parseInt(req.params.id)` β†’ `req.params.id` 
- β… PUT: `r.id === id` β†’ `r._id === id`
- β… DELETE: `r.id === id` β†’ `r._id === id`

### 5. κΈ°λ¥ κ²€μ¦ κ²°κ³Ό
**ν…μ¤νΈ μ™„λ£**:
- β… POST: UUID μƒμ„± μ„±κ³µ (`_id: "0ace2d1e-dec3-4a47-8f31-23f8a44f25b9"`)
- β… PUT: UUIDλ΅ μμ • μ„±κ³µ (`updatedAt` ν•„λ“ μ¶”κ°€)
- β… DELETE: UUIDλ΅ μ‚­μ  μ„±κ³µ
- β… GET by ID: μ‚­μ λ ν•­λ©μ— λ€ν•΄ 404 λ°ν™ ν™•μΈ